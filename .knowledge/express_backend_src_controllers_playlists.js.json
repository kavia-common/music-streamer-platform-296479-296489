{"is_source_file": true, "format": "JavaScript", "description": "This file defines the PlaylistsController class for managing playlist-related operations in an Express.js backend. It includes methods for creating, fetching, updating playlists, and adding tracks to playlists. The file interacts with a Supabase database and enforces row-level security policies.", "external_files": ["../utils/schemaInit"], "external_methods": ["ensureTablesExist"], "published": ["PlaylistsController"], "classes": [{"name": "PlaylistsController", "description": "Controller class handling playlist operations including creation, retrieval, update, and adding tracks, with access control via user-scoped Supabase client."}], "methods": [{"name": "createPlaylist(req, res)", "description": "Creates a new playlist for the authenticated user, validating input, checking profile existence, and respecting RLS policies.", "scope": "PlaylistsController", "scopeKind": "class"}, {"name": "getPlaylists(req, res)", "description": "Fetches all playlists owned by the authenticated user, with access control enforced via RLS policies.", "scope": "PlaylistsController", "scopeKind": "class"}, {"name": "getPlaylistWithItems(req, res)", "description": "Retrieves a playlist along with its track items, verifying access rights based on playlist visibility and ownership.", "scope": "PlaylistsController", "scopeKind": "class"}, {"name": "updatePlaylist(req, res)", "description": "Updates playlist details such as description and visibility, ensuring the user owns the playlist.", "scope": "PlaylistsController", "scopeKind": "class"}, {"name": "addTrackToPlaylist(req, res)", "description": "Adds a track to a playlist, including upsert of track data and ensuring database schema consistency.", "scope": "PlaylistsController", "scopeKind": "class"}], "calls": ["req.supabase", "supabase.from", "supabase.select", "supabase.insert", "supabase.update", "supabase.single", "supabase.maybeSingle", "console.error"], "search-terms": ["PlaylistsController", "createPlaylist", "getPlaylists", "getPlaylistWithItems", "updatePlaylist", "addTrackToPlaylist", "supabase", "row-level security", "playlist_items", "track", "audius_track_id", "schemaInit"], "state": 2, "file_id": 17, "knowledge_revision": 81, "git_revision": "79cd089895c2d20dc55487a636e1732c3b0b9d1c", "revision_history": [{"46": "2125867a457b7715495270e8aad2b5ed263dda94"}, {"49": "2125867a457b7715495270e8aad2b5ed263dda94"}, {"69": "90d2b2940103a1a1c5566ad91ef92a28d0d63663"}, {"75": "fed757a249e0aca150247a2256948f17cf294f48"}, {"81": "79cd089895c2d20dc55487a636e1732c3b0b9d1c"}], "ctags": [{"_type": "tag", "name": "PlaylistsController", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/playlists.js", "pattern": "/^class PlaylistsController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "addTrackToPlaylist", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/playlists.js", "pattern": "/^  async addTrackToPlaylist(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "PlaylistsController", "scopeKind": "class"}, {"_type": "tag", "name": "createPlaylist", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/playlists.js", "pattern": "/^  async createPlaylist(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "PlaylistsController", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/playlists.js", "pattern": "/^module.exports = new PlaylistsController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "getPlaylistWithItems", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/playlists.js", "pattern": "/^  async getPlaylistWithItems(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "PlaylistsController", "scopeKind": "class"}, {"_type": "tag", "name": "getPlaylists", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/playlists.js", "pattern": "/^  async getPlaylists(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "PlaylistsController", "scopeKind": "class"}, {"_type": "tag", "name": "updatePlaylist", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/playlists.js", "pattern": "/^  async updatePlaylist(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "PlaylistsController", "scopeKind": "class"}], "hash": "a172eb4c8b4458a0342e718c137fbea0", "format-version": 4, "code-base-name": "express_backend", "filename": "express_backend/src/controllers/playlists.js", "fields": [{"name": "module.exports = new PlaylistsController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}]}