{"is_source_file": true, "format": "JavaScript", "description": "This file defines the FavoritesController class for managing user's favorite tracks in a music streaming platform backend. It includes methods for adding, retrieving, and removing favorite tracks, interacting with a database via Supabase client, and handling related schema operations.", "external_files": ["../utils/schemaInit"], "external_methods": ["ensureTablesExist"], "published": ["FavoritesController"], "classes": [{"name": "FavoritesController", "description": "Controller class managing favorite tracks, providing methods for adding, retrieving, and removing favorites tied to authenticated users."}], "methods": [{"name": "addFavorite(req, res)", "description": "Adds a track to the authenticated user's favorites, creating the track in the database if it doesn't already exist.", "scope": "FavoritesController", "scopeKind": "class"}, {"name": "getFavorites(req, res)", "description": "Retrieves all favorite tracks for the authenticated user, including track metadata.", "scope": "FavoritesController", "scopeKind": "class"}, {"name": "removeFavorite(req, res)", "description": "Removes a specified track from the user's favorites.", "scope": "FavoritesController", "scopeKind": "class"}], "calls": ["ensureTablesExist", "supabase.from('tracks').select", "supabase.from('tracks').insert", "supabase.from('favorites').select", "supabase.from('favorites').insert", "supabase.from('favorites').delete"], "search-terms": ["FavoritesController", "addFavorite", "getFavorites", "removeFavorite", "schemaInit", "favorites", "music-streamer-platform"], "state": 2, "file_id": 32, "knowledge_revision": 112, "git_revision": "cf48f16d929fa437b3b2727a089c50ea23935f05", "revision_history": [{"99": "d48bfa2949743f1b9478d03e1be8d13c973b7215"}, {"105": "de88619eb1b963530bb0561656b043d4fec2cbd7"}, {"112": "cf48f16d929fa437b3b2727a089c50ea23935f05"}], "ctags": [{"_type": "tag", "name": "FavoritesController", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^class FavoritesController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "addFavorite", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^  async addFavorite(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "FavoritesController", "scopeKind": "class"}, {"_type": "tag", "name": "artist_name", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^          artist_name: artist_name || artist || null,$/", "language": "JavaScript", "kind": "property", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class"}, {"_type": "tag", "name": "audius_stream_url", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^          audius_stream_url: audius_stream_url || null$/", "language": "JavaScript", "kind": "property", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class"}, {"_type": "tag", "name": "audius_track_id", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^          audius_track_id: audius_track_id || null,$/", "language": "JavaScript", "kind": "property", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class"}, {"_type": "tag", "name": "duration_seconds", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^          duration_seconds: duration_seconds || duration || null,$/", "language": "JavaScript", "kind": "property", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^module.exports = new FavoritesController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "getFavorites", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^  async getFavorites(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "FavoritesController", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^          id: track_id,$/", "language": "JavaScript", "kind": "property", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class"}, {"_type": "tag", "name": "removeFavorite", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^  async removeFavorite(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "FavoritesController", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^          title: title || 'Untitled Track',$/", "language": "JavaScript", "kind": "property", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class"}, {"_type": "tag", "name": "trackData", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/controllers/favorites.js", "pattern": "/^        const trackData = {$/", "language": "JavaScript", "kind": "class", "scope": "FavoritesController.addFavorite", "scopeKind": "class"}], "hash": "00960358d8b165395834de4b21ac9bef", "format-version": 4, "code-base-name": "express_backend", "filename": "express_backend/src/controllers/favorites.js", "fields": [{"name": "artist_name: artist_name || artist || null,", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class", "description": "unavailable"}, {"name": "audius_stream_url: audius_stream_url || null", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class", "description": "unavailable"}, {"name": "audius_track_id: audius_track_id || null,", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class", "description": "unavailable"}, {"name": "duration_seconds: duration_seconds || duration || null,", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class", "description": "unavailable"}, {"name": "module.exports = new FavoritesController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "id: track_id,", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class", "description": "unavailable"}, {"name": "title: title || 'Untitled Track',", "scope": "FavoritesController.addFavorite.trackData", "scopeKind": "class", "description": "unavailable"}]}