{"is_source_file": true, "format": "JavaScript", "description": "This file implements an Express middleware function to authenticate requests using JWT tokens verified via Supabase. It extracts tokens from request headers, verifies them with Supabase's auth system, and creates user-scoped Supabase clients for RLS enforcement, attaching user info and client to the request object.", "external_files": ["@supabase/supabase-js"], "external_methods": ["createClient", "supabaseAdmin.auth.getUser"], "published": ["authenticateToken"], "classes": [], "methods": [{"name": "authenticateToken(req, res, next)", "description": "Middleware function that authenticates incoming requests by verifying JWT tokens with Supabase and setting up user-specific clients and info.", "scope": "", "scopeKind": ""}], "calls": ["require('@supabase/supabase-js').createClient", "supabaseAdmin.auth.getUser", "createClient"], "search-terms": ["auth middleware", "JWT verification", "Supabase auth", "Express request auth", "token extraction", "RLS policy enforcement"], "state": 2, "file_id": 15, "knowledge_revision": 48, "git_revision": "e46da97b943a704654162a7f6f2ed02552382fa6", "revision_history": [{"38": ""}, {"48": "e46da97b943a704654162a7f6f2ed02552382fa6"}], "ctags": [{"_type": "tag", "name": "authenticateToken", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^  authenticateToken$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "authenticateToken", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^async function authenticateToken(req, res, next) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res, next)"}, {"_type": "tag", "name": "supabaseAdmin", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^const supabaseAdmin = createClient(supabaseUrl, supabaseKey);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabaseKey", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^const supabaseKey = process.env.SUPABASE_KEY;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabaseUrl", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^const supabaseUrl = process.env.SUPABASE_URL;$/", "language": "JavaScript", "kind": "constant"}], "hash": "f69185987672de9ed4491d0d89186288", "format-version": 4, "code-base-name": "express_backend", "filename": "express_backend/src/middleware/auth.js", "fields": [{"name": "authenticateToken", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}