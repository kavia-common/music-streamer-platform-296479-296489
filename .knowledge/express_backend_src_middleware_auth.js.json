{"is_source_file": true, "format": "JavaScript", "description": "This file defines an Express middleware function 'authenticateToken' that authenticates incoming HTTP requests using Supabase's JWT tokens. It initializes a Supabase client, retrieves the token from request headers, verifies the token, and attaches the user to the request object.", "external_files": ["@supabase/supabase-js"], "external_methods": ["supabase.auth.getUser"], "published": ["authenticateToken"], "classes": [], "methods": [{"name": "authenticateToken(req, res, next)", "description": "Middleware function that validates the access token from the Authorization header using Supabase, attaching the user to the request object upon successful verification.", "scope": "", "scopeKind": ""}], "calls": ["console.error", "supabase.auth.getUser", "res.status", "res.json"], "search-terms": ["auth middleware", "Supabase JWT authentication", "Express authorization", "auth.js", "token verification"], "state": 2, "file_id": 15, "knowledge_revision": 38, "git_revision": "", "ctags": [{"_type": "tag", "name": "authenticateToken", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^  authenticateToken$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "authenticateToken", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^async function authenticateToken(req, res, next) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res, next)"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^const supabase = createClient(supabaseUrl, supabaseKey);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabaseKey", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^const supabaseKey = process.env.SUPABASE_KEY;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "supabaseUrl", "path": "/home/kavia/workspace/code-generation/music-streamer-platform-296479-296489/express_backend/src/middleware/auth.js", "pattern": "/^const supabaseUrl = process.env.SUPABASE_URL;$/", "language": "JavaScript", "kind": "constant"}], "hash": "b8d77fce6cca007df539f3ce3267eb64", "format-version": 4, "code-base-name": "express_backend", "filename": "express_backend/src/middleware/auth.js", "fields": [{"name": "authenticateToken", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"38": ""}]}